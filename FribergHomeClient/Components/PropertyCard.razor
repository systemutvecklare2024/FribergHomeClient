@inject NavigationManager NavManager
@using FribergHomeClient.Data.Dto

@* Author: Glate *@
<style>
	.custom-card:hover {
		transform: scale(1.02); /* Slight zoom effect */
		box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3); /* Adds shadow */
	}

	.custom-card {
		transition: all 0.3s ease-in-out;
	}

	.radzen-carousel ul{
		border-top-right-radius: 0 !important;
		border-bottom-right-radius: 0 !important;
		border-bottom-left-radius: 4px !important;
		border-top-left-radius: 4px !important;
	}

	.border-radius-right{
		border-bottom-right-radius: 4px !important;
		border-top-right-radius: 4px !important;
	}

	.radzen-text-overflow {
		display: -webkit-box;
		-webkit-line-clamp: 3; /* Number of lines before ellipsis appears */
		-webkit-box-orient: vertical;
		overflow: hidden;
		text-overflow: ellipsis;
	}


</style>

<RadzenCard class="rz-my-12 rz-mx-auto p-0 m-1 custom-card" Style="height: 30vh;">
	<RadzenRow class="rz-text-align-center m-0 p-0" Style="width: 100%; height: 100%;" Gap="0">
		<!-- Image -->
		<RadzenColumn class="rz-color-on-info-light radzen-carousel" Style="width: 50%; display: flex; flex-grow: 1;">
			<RadzenCarousel 
				Auto="false"
				AllowNavigation="@true"
				Style="width: 100%; max-height: 30vh; border-radius: 0; object-fit: cover;" class="rz-mx-auto"
				ButtonStyle="ButtonStyle.Light"
				ButtonSize="ButtonSize.Small"
				ButtonShade="Shade.Lighter"
				ButtonVariant="Variant.Text">
				<Items>
					@foreach (var i in Property.ImageUrls)
					{
						<RadzenCarouselItem>
							<RadzenImage Path="@i.ImgURL" class="rz-h-100 radzen-carousel-item" Style="width: 100%;"/>
						</RadzenCarouselItem>
					}
				</Items>
			</RadzenCarousel>
		</RadzenColumn>

		<!-- Property info -->
		<RadzenColumn class="" Style="width: 50%; height: 100%; cursor: pointer;">
			<RadzenCard class="rz-background-color-primary-light rz-shadow-0 rz-p-8 rz-border-radius-0 border-radius-right" Style="width: 100%; height: 100%; overflow: hidden; overflow-x: hidden;">
					
				<RadzenText TextStyle="TextStyle.H6" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.Street)</b></RadzenText>
				<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.City), @(Property.Muncipality) kommun</b></RadzenText>
				<br />
				<RadzenRow Gap="10">
					<RadzenColumn SizeSM="5">
						<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.ListingPrice.ToString("0"))kr</b></RadzenText>
						<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.MonthlyFee.ToString("0"))kr/mån</b></RadzenText>
					</RadzenColumn>

					<RadzenColumn SizeSM="5">
						<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.LivingSpace.ToString("0"))m<sup>2</sup></b></RadzenText>
						<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.NumberOfRooms) rum</b></RadzenText>
					</RadzenColumn>
				</RadzenRow>
				<RadzenRow>
					<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="rz-color-on-primary-light"><b>@(Property.LotSize.ToString("0")) rum</b></RadzenText>
				</RadzenRow>
				<RadzenRow Style="height: 5em; overflow: hidden; margin-bottom: 2em;">
					<RadzenText TextStyle="TextStyle.Body2" TextAlign="TextAlign.Start" class="radzen-text-overflow">
						@Property.Description
					</RadzenText>
				</RadzenRow>
			</RadzenCard>
		</RadzenColumn>

	</RadzenRow>
</RadzenCard>

@code {
	[Parameter]
	public PropertyDTO Property { get; set; }

	protected override async Task OnInitializedAsync()
	{
		await base.OnInitializedAsync();

	}

	private void NavigateTo()
	{
		//TODO: Add navigation to details page here!
		// NavManager.NavigateTo($"/pagestuff/{Property.Id}");
	}
}
