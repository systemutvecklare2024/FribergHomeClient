@using Microsoft.JSInterop
@using System.Text.Json
@inject IAuthenticationService authService
@inject NavigationManager NavManager
@inject DialogService DialogService
@inject IJSRuntime JSRuntime

@* //Author:Emelie *@

<RadzenButton Shade="Shade.Light" Click=@ShowLogoutDialog ButtonStyle="ButtonStyle.Primary" Style="margin-right:2em;"
			  Text=@(SidebarExpanded ? "Logga ut" : null)
			  Icon=@(SidebarExpanded ? "logout" : "logout") />

@code {
	[Parameter]
	public bool SidebarExpanded { get; set; } = true;

	async Task ShowLogoutDialog()
	{
		var result = await DialogService.OpenAsync<LogoutConfirmationDialog>(
			"Bekräftelse",
			null,
			new DialogOptions() { Width = "400px", Height = "250px" });

		if (result is bool confirmed && confirmed)
		{
			// Logga ut användaren
			await authService.Logout();
			NavManager.NavigateTo("/");
		}
	}

}
