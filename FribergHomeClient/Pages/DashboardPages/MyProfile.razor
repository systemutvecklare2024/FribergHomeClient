@page "/dashboard/myprofile"
@using FribergHomeClient.Components
@inject NavigationManager navigationManager
@inject IRealEstateAgentService AgentService
@inject NotificationService NotificationService

@* Author: Tobias
   CoAuthor: Emelie
*@

<PageTitle>Min Profil</PageTitle>

@if (agentId.HasValue)
{
    <AgentProfile Id="agentId"></AgentProfile>
}
else
{
    <Spinner/>
}

@code {
    private int? agentId;

    protected override async Task OnInitializedAsync()
    {
        agentId = await AgentService.GetMyAgentId();
        if (!agentId.HasValue)
        {
            NotificationService.Notify(NotificationSeverity.Error, "Misslyckades hitta mäklare, försök igen");
        }
    }

}
