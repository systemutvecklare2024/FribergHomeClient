@page "/dashboard/agency"
@using FribergHomeClient.Components
@using FribergHomeClient.Data.Dto
@using Blazored.LocalStorage
@inject ILocalStorageService LocalStorage
@inject HttpClient Http

<PageTitle>Min Mäklarbyrå</PageTitle>

@if (agency != null)
{
    <AgencyCard Name="@agency.Name" Presentation="@agency.Presentation" LogoUrl="@agency.LogoUrl"></AgencyCard>
    <RadzenRow JustifyContent="@JustifyContent.Center" AlignItems="@AlignItems.Normal" Gap="1">


        @foreach (var agent in agency.Agents)
        {
            <RadzenColumn Size="2" class="rz-text-align-center rz-p-2">
                <SmallAgentCard Agent="@agent"/>
            </RadzenColumn>
        }
    </RadzenRow>
}
else
{
    <Spinner/>
}

@code {
    RealEstateAgencyPageDTO? agency { get; set; }


    protected override async Task OnInitializedAsync()
    {
        agency = await Http.GetFromJsonAsync<RealEstateAgencyPageDTO>($"api/RealEstateAgencies/My");
    }

}
